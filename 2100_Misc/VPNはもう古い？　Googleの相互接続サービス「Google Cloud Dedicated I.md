---
title: VPNはもう古い？　Googleの相互接続サービス「Google Cloud Dedicated Interconnect」とは
updated: 2018-02-14 11:42:11Z
created: 2018-02-14 11:42:11Z
source: http://techtarget.itmedia.co.jp/tt/news/1802/05/news06.html
author: xyvyx10
tags:
  - Web
---

# AWSやMicrosoft Azureとも比較VPNはもう古い？ Googleの相互接続サービス「Google Cloud Dedicated Interconnect」とは

## データセンターをパブリッククラウドにプライベート接続する手段として、VPNに代わる選択肢が充実し始めている。Googleが提供する「Google Cloud Dedicated Interconnect」の主な機能と利用要件を解説する。

**[**[Kurt Marko](http://www.itmedia.co.jp/author/209876/)，**TechTarget]**
　ハイブリッドクラウドの利用拡大が進む中、強力で信頼性の高いネットワーク接続が極めて重要になっている。

　企業は、少なくとも数Gbpsのトラフィックを処理できる高速で低レイテンシ（遅延）のリンク（回線）を必要としている。一部の企業は従来のVPN（仮想プライベートネットワーク）を選択しているが、このアプローチはスケーラビリティに制約がある。

　VPNに代わる1つの選択肢として、社内LANやプライベートクラウドなどのオンプレミスネットワークと、クラウドベンダー間のプライベートな物理レイヤーの相互接続が挙げられる。その一例がGoogleの相互接続サービス「Google Cloud Dedicated Interconnect」だ。

### 主な機能

　Google Cloud Dedicated Interconnectは、Googleのパブリッククラウド「Google Cloud Platform（GCP）」内の仮想ネットワークサービス「Virtual Private Cloud（VPC）」ネットワークへの物理接続と、プライベートIPアドレス（RFC 1918準拠）を使ったGCPへのアクセスを可能にする。このサービスを使用すれば、オンプレミスネットワークとVPCネットワークとの間で大量のデータを転送でき、インターネット回線を高速化したり、VPNを使用したりするよりもコスト効率が高くなる。

　オンプレミスネットワークとVPCネットワークの間の通信は、パブリックインターネットを通過せず、ホップ数（中継機器数）が少ない専用のネットワークを通過する。このため、通信が遮断したり混乱したりする可能性のある障害ポイントが少なくなる。

　相互接続用のリンクは10Gbpsイーサネットで提供され、数は1～8リンクだ（1つの相互接続当たり10Gbps～80Gbps）。

　1リンク当たりの最低データ転送速度が10Gbpsであることから、Googleはこのレベルの速度を必要としないユーザー企業には、VPNサービス「Google Cloud VPN」の利用を検討するよう勧めている。

### 主な利用要件

　Google Cloud Dedicated Interconnectを使用するには、Google指定のコロケーション（ラックスペース貸し出し）ベンダーの施設内にあるGoogleネットワークに、オンプレミスネットワークを物理的に接続する必要がある。そのためには独自のルーターを用意しなければならない。

　コロケーション施設では、オンプレミスネットワーク機器が以下の技術要件を満たしている必要がある。

- シングルモード（単一の反射角／屈折角を利用する伝送方式）の光ファイバー
    - イーサネット規格「10GBASE-LR」に準拠
    - 波長1310ナノ
- IPv4のリンクローカルアドレス（同一リンク内のみで有効なIPアドレス）
- 複数のリンクを束ねるための「リンクアグリゲーション」（プロトコルはLACP）
- 直接接続していない自律システム（AS：インターネットの管理単位）同士の接続に利用する「eBGPマルチホップ」
- VLAN規格「IEEE 802.1Q」

　コロケーション施設でオンプレミスルーターを、Google側のネットワークエッジ（以下、ピアリングエッジ）と接続し、ピアリングエッジをVPCネットワーク内のルーター「Cloud Router」と接続する。Cloud Routerとオンプレミスルーターの間の相互接続を介して、経路制御プロトコルBGP（Border Gateway Protocol）のセッションを確立すると、ルーター間で経路情報を交換できる。

　相互接続にVLANを割り当てる「VLANアタッチメント」を使って、オンプレミスネットワークと相互接続するVPCネットワークを制御する。1つの相互接続に複数のVLANを割り当て、複数のVPCネットワーク、またはVPCネットワーク内の複数リージョン（地域）に接続することもできる。

### 料金

　Google Cloud Dedicated Interconnectは、相互接続、VLANアタッチメント、下りトラフィック（相互接続を介したVPCネットワークからの）について、以下の料金を設定している。

- 相互接続：10Gbpsリンク当たり月額1700ドル
- VLANアタッチメント：アタッチメント当たり月額72ドル
- 下りトラフィック
    - 北米および欧州リージョン：1GB当たり0.02ドル
    - アジアおよびオーストラリアリージョン：1GB当たり0.042ドル

### 利用

　Google Cloud Dedicated Interconnectは、以下の手順で利用する。

#### 1．注文する

　ユーザー企業が相互接続を注文すると、Googleがユーザー企業に確認メールを送信し、ポートを割り当てる。割り当てが完了すると、Googleは相互接続ごとにLOA-CFA（相互接続リクエスト：Letter of Authorization and Connecting Facility Assignment）を生成し、ユーザー企業にメールで送信する。

　LOA-CFAには、物理接続を確立するための技術的詳細が記載されている。

#### 2．LOA-CFAをコロケーション施設ベンダーに送信する

　ユーザー企業はLOA-CFAを受け取ったら、コロケーション施設ベンダーに送信する。コロケーション施設ベンダーはLOA-CFAを基に、Googleのピアリングエッジとオンプレミスネットワークとの相互接続を準備する。

#### 3．相互接続をテストする

　Googleが自動メールで送信する設定情報に従って、ユーザー企業側がルーターを設定し、Googleがテストする。テストは2回にわたって実行し、最初は各相互接続の光ファイバーリンクのテスト、2回目は各相互接続の本番環境用のIP設定テストをする。両方のテストに合格すると、相互接続が使用できるようになる。

#### 4．VLANアタッチメントを作成してBGPセッションを確立する

　相互接続を使用する準備ができたら、VPCネットワークをオンプレミスネットワークに接続する必要がある。そのためには、目的のVPCネットワーク内から既存のCloud Routerを指定して、VLANアタッチメントを作成する。VLANアタッチメントからの情報を使用して、Cloud Routerとオンプレミスルーターの間のBGPセッションを確立し、VPCネットワークとオンプレミスネットワーク間で通信を開始する。

### 可用性

　Google Cloud Dedicated Interconnectは、構成に応じて99.9％または99.99％のアップタイム（正常に動作する時間）を実現できる。99.99％の可用性を実現するには、以下のリソースと設定が必要になる。

- 4つの相互接続。2つの相互接続を1つの「大都市圏」（都市）に、他の2つの相互接続をもう1つの都市に置く。同じ都市内の相互接続は、別々の「可用性ゾーン」というデータセンター群に置く
- 4つのCloud Router。2つずつをそれぞれ別のリージョンに置く。仮想マシン（VM）を1つのリージョンでのみ使っていても、障害発生時を考慮し、2つのリージョンを使用しなければならない。各Cloud Routerには、異なる相互接続（4つの異なるVLANアタッチメント）を接続しなければならない
- VPCネットワークの「動的ルーティングモード」（Cloud Router で通知するサブネットを決める設定）は、「グローバル」を選択しなければならない。グローバルに設定すると、Cloud Routerは全てのサブネットを通知する。リージョンを問わず全てのサブネットに、学習した経路を広げることができる
- 可用性要件に応じて、オンプレミスネットワークに2つまたは4つのルーターを置くことになる可能性がある

### AWSやMicrosoft Azureとの比較

　Amazon Web Servicesの「AWS Direct Connect」とMicrosoftの「Azure ExpressRoute」は、いずれもGoogle Cloud Dedicated Interconnectと似たサービスだ。クラウドインフラとオンプレミスネットワークとの相互接続を確立するための物理的要件は、どのサービスも同様だ。いずれも多くのコロケーション施設ベンダーおよび通信事業者と協力し、世界中に数十カ所の接続ポイントを確保して、接続を提供している。ただし、AWSとMicrosoft Azure（以下、Azure）は接続容量に関して、リンク当たり50Gbps～10Gbpsの範囲で幅広い選択肢を提供している。

　料金については、MicrosoftもGoogleと同様に、接続料金がポート数と接続容量に応じた月額制で、下りトラフィックがデータ転送量に応じた従量制料金だ。AWSは、接続料金をポート数、接続容量、接続時間（1時間刻み）に応じて決定し、下りトラフィックが、同じくデータ転送量に応じた従量制料金となっている。

　導入負荷と、パブリッククラウドへの直接接続の重要性を考えると、大多数の企業は、この相互接続を常に維持すると考えられる。
　AWSとAzureそれぞれの相互接続サービスは、Googleと同様に、各社の全てのクラウドサービスへのアクセスを提供する。