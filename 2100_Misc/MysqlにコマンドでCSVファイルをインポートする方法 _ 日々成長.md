---
title: MysqlにコマンドでCSVファイルをインポートする方法 | 日々成長
updated: 2017-01-27 00:35:27Z
created: 2017-01-27 00:35:27Z
source: https://everyday-growth.com/?p=729
tags:
  - SI
---

# MysqlにコマンドでCSVファイルをインポートする方法 | 日々成長

データ数が多いCSVファイルをWEBスクリプト経由のCSV取り込みを実施するとタイムアウトエラーが起きる場合があります
例えば、郵便番号情報ファイル(KEN_ALL.csv)なんかがいい例。
約124000行、17MBほどのファイルになるので、WEBベースで取り込むのは難しいところがあります
php.iniファイルを編集して、取り込み細大ファイル容量を増やしたり、タイムアウトの時間を延ばせばやり過ごせますが、
たまにしか更新しないファイルの取り込みのためだけにタイムアウトの時間を延ばすのは、障害が起こった場合も設定されたタイムアウト時間まで待つしかなくなります。
しかもApacheの設定を変えるということは、Apacheの再起動が必要となるのでその時はセッションが切れてしまってこれもどうかなと。
結局は、サーバーにSSL接続してMysqlに繋いでCSVファイルをサーバー内で取り込ませるのが最善の方法
まぁなんて早いこと早いこと
以下、コマンド

* * *

１.Mysqlへ接続

|     |     |
| --- | --- |
| 1<br>2 | $mysql-uユーザー名-<br>$パスワード |

２.DBへ接続

|     |     |
| --- | --- |
| 1   | mysql>use接続したいデータベース名 |

３.接続されたかテーブルを確認

|     |     |
| --- | --- |
| 1   | mysql>show tables |

４.対象のテーブルへCSVファイルをインポート

|     |     |
| --- | --- |
| 1<br>2 | load data local infile"/var/www/html/KEN_ALL.CSV"<br>into table対象テーブル名fields terminated by','OPTIONALLY ENCLOSED BY'"'; |

これでインポートは終了です。
CSVのフィールドのがカンマ区切りの場合は
fields terminated by ‘,’
文字列にダブルクォーテーションが入っている場合はその後に
OPTIONALLY ENCLOSED BY ‘”‘
を設定します。